{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.89313ff59b23f91e2bd6.hot-update.js","sources":["webpack:///./components/PostForm.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { Form, Input, Button } from 'antd';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { ADD_POST_REQUEST, LOAD_POST_REQUEST } from '../reducer/post'\r\n\r\nconst useInput = (initValue = null) => {\r\n  const [value, setter] = useState(initValue);\r\n  const handler = useCallback((e) => {\r\n    setter(e.target.value);\r\n  }, []);\r\n  return [value, setter, handler];\r\n};\r\n\r\n\r\nconst PostForm = () => {\r\n\r\n  const [firstText, setFirstText, changeFirstText] = useInput('');\r\n  const [secondText, setSecondText, changeSecondText] = useInput('');\r\n  const [thridText, setThridText,changeThridText] = useInput('');\r\n\r\n  const { mainPosts } = useSelector(state => state.post);\r\n  console.log(mainPosts);\r\n  \r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (mainPosts !== []) {\r\n      dispatch({\r\n        type: LOAD_POST_REQUEST,\r\n        lastId: mainPosts[mainPosts.length - 1].id\r\n      }) \r\n    }\r\n  }, []);\r\n\r\n  const onScroll = () => {\r\n    if ( window.scrollY + document.documentElement.clientHeight > document.documentElement.scrollHeight - 300 ) {\r\n      dispatch({\r\n        type: LOAD_POST_REQUEST,\r\n        lastId: mainPosts[mainPosts.length - 1].id\r\n      })\r\n    }  \r\n    \r\n  }\r\n\r\n  useEffect(() => {\r\n    console.log(123);\r\n    window.addEventListener('scroll', onScroll);\r\n    return () => {\r\n      window.removeEventListener('scroll', onScroll)\r\n    }\r\n  }, [mainPosts.length]);\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!firstText || !secondText || !thridText) {\r\n      return alert('게시글을 작성하세요.');\r\n    }\r\n    const text = `º오늘 한 일 ${firstText} º문제점 ${secondText} º내일 할 일 ${thridText}`;\r\n    dispatch({\r\n      type: ADD_POST_REQUEST,\r\n      data: text,\r\n    });\r\n    setFirstText('');\r\n    setSecondText('');\r\n    setThridText('');\r\n  }\r\n  return (\r\n    <>\r\n      <Form onSubmit={onSubmit} style={{ margin: '30px' }} encType=\"multipart/form-data\">\r\n        <Input.TextArea value={firstText}  onChange={changeFirstText} maxLength={500} placeholder=\"오늘 한 일(Facts (사실, 객관),Feelings (느낌, 주관),  Findings (배운 점)) \" style={{ height: '150px', width: \"1000px\"}} />\r\n        <Input.TextArea value={secondText} onChange={changeSecondText} maxLength={500} placeholder=\"문제점\" style={{ height: '150px', width: \"1000px\"}}/>\r\n        <Input.TextArea value={thridText} onChange={changeThridText} maxLength={500} placeholder=\"내일 할 일\" style={{ height: '150px', width: \"1000px\"}}/><br /><br />\r\n        <Button type=\"primary\" style={{ backgroundColor: '#00001a', borderColor: '#00001a', width: \"200px\", marginLeft: \"390px\" }} htmlType=\"submit\">발행</Button>\r\n      </Form>\r\n  </>\r\n  )\r\n}\r\n\r\n\r\nexport default PostForm;"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAMA;AAAA;AANA;AACA;AAMA;AAGA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAEA;;;;A","sourceRoot":""}