{"version":3,"file":"static/webpack/static\\development\\pages\\_app.js.1f1357cf697c7ca44174.hot-update.js","sources":["webpack:///./pages/_app.js"],"sourcesContent":["import React from 'react';\r\nimport Head from 'next/head';\r\nimport PropTypes from 'prop-types';\r\nimport withRedux from 'next-redux-wrapper';\r\nimport { applyMiddleware, compose, createStore } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport withReduxSaga from 'next-redux-saga';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport AppLayout from '../components/AppLayout';\r\nimport reducer from '../reducer';\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport rootSaga  from '../sagas';\r\nimport axios from 'axios';\r\nimport { useDispatch } from 'react-redux';\r\n\r\n\r\nconst Restropect = ({ Component, store, pageProps }) => {\r\n  return (\r\n    <>\r\n      <Provider store={store}>\r\n        <Head>\r\n          <title>restropect</title>\r\n          <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/antd/3.25.3/antd.css\" />\r\n        </Head>\r\n        <AppLayout>\r\n          <Component {...pageProps}/>\r\n        </AppLayout>\r\n      </Provider>\r\n    </>\r\n  );\r\n}\r\n\r\nRestropect.propTypes = {\r\n  Component: PropTypes.elementType,\r\n  store: PropTypes.object,\r\n};\r\n\r\n\r\nRestropect.getInitialProps = async (context) => {\r\n  const { ctx, Component } = context;\r\n  const pageProps = {};\r\n  const state = ctx.store.getState();\r\n  const cookie = ctx.isServer ? ctx.req.headers.cookie : '';\r\n  if (ctx.isServer) {\r\n    axios.defaults.headers.Cookie = cookie\r\n  }\r\n  if (!state.user.userId) {\r\n    ctx.store.dispatch({\r\n      type: LOAD_USER_REQUEST,\r\n    });\r\n  }\r\n  if (Component.getIntialProps) {\r\n    pageProps = await Component.getInitialProps(ctx);\r\n  }\r\n  return pageProps;\r\n}\r\n\r\nconst configureStore = (initialState) => {\r\n  const sagaMiddleware = createSagaMiddleware();\r\n  const middlewares = [sagaMiddleware];\r\n  const enhancer = compose(composeWithDevTools(applyMiddleware(...middlewares)));\r\n  const store = createStore(reducer, initialState, enhancer);\r\n  store.sagaTask = sagaMiddleware.run(rootSaga);\r\n  return store;\r\n};\r\n\r\n\r\nexport default withRedux(configureStore)(withReduxSaga(Restropect));"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AAFA;AACA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAbA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAAA;AACA;AADA;AAcA;AACA;AAfA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;A","sourceRoot":""}